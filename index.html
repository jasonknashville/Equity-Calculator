<!doctype html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-MH9X9NGV');
  </script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>5-Year Equity Calculator • Jason Kaczmarski Team</title>

  <style>
    :root{
      --bg:#0b1220;
      --card:#0f172a;
      --text:#e5e7eb;
      --muted:#9ca3af;
      --line:#1f2937;
      --accent:#38bdf8;
      --good:#22c55e;
      --warn:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background: radial-gradient(1200px 500px at 20% -10%, rgba(56,189,248,.18), transparent 60%),
                  radial-gradient(900px 500px at 90% 0%, rgba(34,197,94,.12), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{max-width:980px;margin:0 auto;padding:22px 16px 48px}
    header{display:flex;flex-direction:column;gap:8px;margin-bottom:14px}
    h1{font-size:24px;margin:0}
    .sub{color:var(--muted);line-height:1.35}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media(min-width:900px){.grid{grid-template-columns: 1.1fr .9fr}}
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border:1px solid var(--line);
      border-radius:14px;
      padding:14px;
    }
    .card h2{margin:0 0 10px 0;font-size:16px}
    .row{display:grid;grid-template-columns: 1fr;gap:10px;margin-bottom:10px}
    @media(min-width:640px){.row{grid-template-columns: 1fr 1fr}}
    label{display:block;font-size:12px;color:var(--muted);margin-bottom:6px}
    input[type="number"], input[type="text"], select{
      width:100%;
      background:rgba(0,0,0,.25);
      border:1px solid var(--line);
      border-radius:10px;
      color:var(--text);
      padding:10px 10px;
      outline:none;
    }
    input[type="range"]{width:100%}
    .hint{font-size:12px;color:var(--muted);margin-top:6px;line-height:1.35}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      background:rgba(56,189,248,.12);
      border:1px solid rgba(56,189,248,.28);
      padding:6px 10px;border-radius:999px;font-size:12px;color:var(--text)
    }
    .kpi{
      display:grid;grid-template-columns:1fr;gap:10px
    }
    .kpi .box{
      background:rgba(0,0,0,.22);
      border:1px solid var(--line);
      border-radius:12px;
      padding:12px;
    }
    .kpi .label{color:var(--muted);font-size:12px;margin-bottom:6px}
    .kpi .value{font-size:20px;font-weight:700}
    .kpi .delta{margin-top:6px;font-size:12px;color:var(--muted)}
    .good{color:var(--good)}
    .muted{color:var(--muted)}
    table{width:100%;border-collapse:collapse;margin-top:10px}
    th,td{padding:10px 8px;border-bottom:1px solid var(--line);text-align:right;font-variant-numeric: tabular-nums}
    th:first-child, td:first-child{text-align:left}
    th{color:var(--muted);font-weight:600;font-size:12px}
    .foot{
      margin-top:12px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
    }
    .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    button{
      background:rgba(56,189,248,.14);
      border:1px solid rgba(56,189,248,.35);
      color:var(--text);
      padding:10px 12px;
      border-radius:12px;
      cursor:pointer;
    }
    button:hover{filter:brightness(1.08)}
    .small{font-size:12px}
  </style>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MH9X9NGV"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <div class="wrap">
    <header>
      <h1>Equity Growth Calculator</h1>
      <div class="sub">
        See how **principal paydown + appreciation** can build equity over time.
        <span class="pill" id="avgText">Using a long-run U.S. home-price growth reference (~4.4%/yr). Adjust for your scenario.</span>
      </div>
    </header>

    <div class="grid">
      <!-- Inputs -->
      <section class="card">
        <h2>Inputs</h2>

        <div class="row">
          <div>
            <label for="price">Purchase price</label>
            <input id="price" type="text" inputmode="decimal" value="400000" />
          </div>

          <div>
            <label for="term">Loan term (years)</label>
            <select id="term">
              <option value="30" selected>30</option>
              <option value="20">20</option>
              <option value="15">15</option>
              <option value="10">10</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="dpPct">Down payment (%)</label>
            <input id="dpPct" type="number" min="0" max="100" step="0.1" value="5" />
            <div class="hint">Default is 5% (editable).</div>
          </div>

          <div>
            <label for="rate">Interest rate (APR %)</label>
            <input id="rate" type="number" min="0" max="25" step="0.01" value="6.25" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="appSlider">Appreciation rate (% / year)</label>
            <input id="appSlider" type="range" min="-5" max="50" step="0.25" value="4.4" />
            <div class="hint">
              <span id="appLabel"></span><br/>
              Reference: a long-run national measure indicates ~4.4%/yr nominal since 1987 (Case-Shiller-based).  [oai_citation:1‡Advisor Perspectives](https://www.advisorperspectives.com/dshort/updates/2025/12/30/s-p-cotality-case-shiller-index-home-prices-increase-for-third-straight-month?utm_source=chatgpt.com)
            </div>
          </div>

          <div>
            <label for="yearsSlider">Time horizon (years)</label>
            <input id="yearsSlider" type="range" min="1" max="30" step="1" value="5" />
            <div class="hint"><span id="yearsLabel"></span> (default is 5 years)</div>
          </div>
        </div>

        <div class="actions">
          <button id="copyLinkBtn" class="small">Copy a shareable link (with inputs)</button>
          <button id="resetBtn" class="small">Reset defaults</button>
        </div>

        <div class="foot">
          Notes: This is a simplified model. It does not include closing costs, taxes/insurance, HOA, maintenance, refinance, PMI, or selling costs.
          It’s for education/illustration—not financial advice.
        </div>
      </section>

      <!-- Outputs -->
      <aside class="card">
        <h2>Results</h2>

        <div class="kpi">
          <div class="box">
            <div class="label">Estimated home value (year <span id="kpiYears"></span>)</div>
            <div class="value" id="kpiValue">$—</div>
            <div class="delta muted" id="kpiValueDelta">Appreciation gain: —</div>
          </div>

          <div class="box">
            <div class="label">Remaining loan balance</div>
            <div class="value" id="kpiBalance">$—</div>
            <div class="delta muted" id="kpiPrincipalPaid">Principal paid: —</div>
          </div>

          <div class="box">
            <div class="label">Total equity</div>
            <div class="value" id="kpiEquity">$—</div>
            <div class="delta" id="kpiEquityGain">Equity gain vs day 1: —</div>
          </div>

          <div class="box">
            <div class="label">Monthly payment (principal + interest)</div>
            <div class="value" id="kpiPmt">$—</div>
            <div class="delta muted" id="kpiLoanAmt">Loan amount: —</div>
          </div>
        </div>

        <table>
          <thead>
            <tr>
              <th>Year</th>
              <th>Home Value</th>
              <th>Loan Balance</th>
              <th>Equity</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </aside>
    </div>
  </div>

<script>
  // ---------- Helpers ----------
  function parseMoney(input){
    // accepts "400000" or "400,000" or "$400,000"
    const n = Number(String(input).replace(/[^0-9.-]/g,''));
    return isFinite(n) ? n : 0;
  }
  function fmtMoney(n){
    return n.toLocaleString(undefined, {style:'currency', currency:'USD', maximumFractionDigits:0});
  }
  function fmtMoney2(n){
    return n.toLocaleString(undefined, {style:'currency', currency:'USD', maximumFractionDigits:2});
  }
  function clamp(n, min, max){ return Math.min(max, Math.max(min, n)); }

  // Standard fixed-rate mortgage payment
  function monthlyPayment(principal, annualRatePct, termYears){
    const r = (annualRatePct/100) / 12;
    const n = termYears * 12;
    if (r === 0) return principal / n;
    return principal * (r * Math.pow(1+r, n)) / (Math.pow(1+r, n) - 1);
  }

  // Simulate month-by-month: amortization + monthly appreciation on value
  function simulate({price, dpPct, termYears, annualRatePct, annualAppPct, horizonYears}){
    const dp = price * (dpPct/100);
    const loan0 = Math.max(0, price - dp);
    const pmt = monthlyPayment(loan0, annualRatePct, termYears);

    const months = Math.round(horizonYears * 12);
    const r = (annualRatePct/100) / 12;
    const g = (annualAppPct/100) / 12;

    let balance = loan0;
    let value = price;

    let principalPaid = 0;

    // store snapshots at each year end (including year 0)
    const yearly = [];
    yearly.push({year:0, value, balance, equity: value - balance});

    for(let m=1; m<=months; m++){
      // appreciation
      value *= (1 + g);

      // amortization
      const interest = balance * r;
      let principal = pmt - interest;
      if (principal < 0) principal = 0;

      // avoid negative balance if horizon exceeds payoff
      if (principal > balance) {
        principal = balance;
      }
      balance -= principal;
      principalPaid += principal;

      // year-end snapshot
      if (m % 12 === 0){
        const year = m / 12;
        yearly.push({year, value, balance, equity: value - balance});
      }
      if (balance <= 0) {
        // if paid off early, keep compounding value and balance stays at 0
        balance = 0;
        // continue compounding value to horizon if needed
      }
    }

    const end = yearly[yearly.length - 1];
    const appreciationGain = end.value - price;
    const equityGainVsDay1 = end.equity - dp; // day 1 equity = down payment (ignoring closing costs)

    return {
      dp, loan0, pmt,
      end,
      principalPaid,
      appreciationGain,
      equityGainVsDay1,
      yearly
    };
  }

  // ---------- DOM ----------
  const el = (id)=>document.getElementById(id);

  const priceEl = el('price');
  const dpPctEl = el('dpPct');
  const termEl = el('term');
  const rateEl = el('rate');
  const appEl = el('appSlider');
  const yearsEl = el('yearsSlider');

  const appLabel = el('appLabel');
  const yearsLabel = el('yearsLabel');

  function updateLabels(){
    appLabel.textContent = `Selected: ${Number(appEl.value).toFixed(2)}% per year (range: -5% to 50%)`;
    yearsLabel.textContent = `Selected: ${yearsEl.value} year${yearsEl.value === "1" ? "" : "s"}`;
    el('kpiYears').textContent = yearsEl.value;
  }

  function render(){
    updateLabels();

    const price = parseMoney(priceEl.value);
    const dpPct = clamp(Number(dpPctEl.value), 0, 100);
    const termYears = Number(termEl.value);
    const annualRatePct = clamp(Number(rateEl.value), 0, 25);
    const annualAppPct = clamp(Number(appEl.value), -5, 50);
    const horizonYears = clamp(Number(yearsEl.value), 1, 30);

    const r = simulate({price, dpPct, termYears, annualRatePct, annualAppPct, horizonYears});

    el('kpiValue').textContent = fmtMoney(r.end.value);
    el('kpiBalance').textContent = fmtMoney(r.end.balance);
    el('kpiEquity').textContent = fmtMoney(r.end.equity);
    el('kpiPmt').textContent = fmtMoney2(r.pmt);
    el('kpiLoanAmt').textContent = `Loan amount: ${fmtMoney(r.loan0)} • Down payment: ${fmtMoney(r.dp)}`;

    el('kpiValueDelta').textContent = `Appreciation gain: ${fmtMoney(r.appreciationGain)}`;
    el('kpiPrincipalPaid').textContent = `Principal paid: ${fmtMoney(r.principalPaid)}`;

    const gain = r.equityGainVsDay1;
    const gainText = `Equity gain vs day 1: ${fmtMoney(gain)}`;
    el('kpiEquityGain').textContent = gainText;
    el('kpiEquityGain').className = 'delta ' + (gain >= 0 ? 'good' : 'muted');

    // table (year 0..horizon)
    const tbody = el('tableBody');
    tbody.innerHTML = '';
    r.yearly.forEach(row=>{
      const tr = document.createElement('tr');
      const y = document.createElement('td'); y.textContent = row.year;
      const v = document.createElement('td'); v.textContent = fmtMoney(row.value);
      const b = document.createElement('td'); b.textContent = fmtMoney(row.balance);
      const e = document.createElement('td'); e.textContent = fmtMoney(row.equity);
      tr.appendChild(y); tr.appendChild(v); tr.appendChild(b); tr.appendChild(e);
      tbody.appendChild(tr);
    });
  }

  // ---------- Shareable link ----------
  function buildQuery(){
    const params = new URLSearchParams();
    params.set('price', String(parseMoney(priceEl.value)));
    params.set('dp', String(dpPctEl.value));
    params.set('term', String(termEl.value));
    params.set('rate', String(rateEl.value));
    params.set('app', String(appEl.value));
    params.set('years', String(yearsEl.value));
    return params.toString();
  }

  function applyQuery(){
    const params = new URLSearchParams(window.location.search);
    if (!params.size) return;

    if (params.get('price')) priceEl.value = params.get('price');
    if (params.get('dp')) dpPctEl.value = params.get('dp');
    if (params.get('term')) termEl.value = params.get('term');
    if (params.get('rate')) rateEl.value = params.get('rate');
    if (params.get('app')) appEl.value = params.get('app');
    if (params.get('years')) yearsEl.value = params.get('years');
  }

  el('copyLinkBtn').addEventListener('click', async ()=>{
    const url = `${window.location.origin}${window.location.pathname}?${buildQuery()}`;
    try{
      await navigator.clipboard.writeText(url);
      el('copyLinkBtn').textContent = 'Copied!';
      setTimeout(()=> el('copyLinkBtn').textContent = 'Copy a shareable link (with inputs)', 1200);
    }catch(e){
      alert('Could not copy automatically. Link:\\n' + url);
    }
  });

  el('resetBtn').addEventListener('click', ()=>{
    priceEl.value = '400000';
    dpPctEl.value = '5';
    termEl.value = '30';
    rateEl.value = '6.25';
    appEl.value = '4.4';
    yearsEl.value = '5';
    history.replaceState({}, '', window.location.pathname);
    render();
  });

  // inputs -> rerender
  [priceEl, dpPctEl, termEl, rateEl, appEl, yearsEl].forEach(x=>{
    x.addEventListener('input', render);
    x.addEventListener('change', render);
  });

  // init
  applyQuery();
  render();
</script>
</body>
</html>
